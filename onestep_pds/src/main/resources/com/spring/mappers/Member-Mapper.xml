<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="Member-Mapper">
<sql id="search">
	<if test="searchType == 'n'.toString()">
		where title like '%'||#{keyword}||'%'
		and isDelete like
		'%'||#{Deleteis}||'%' </if>
</sql>
<!-- 전체조회 -->
<select id="selectMemberSearchList">
	select *
	from
	member	  	
	<include refid="search" />
	order by regdate desc
</select>
<!-- 개인조회 -->
<select id="selectMemberById">
	select *
	from member
	where memberid=#{memberid}
</select>
<!-- 회원수 카운트 -->
<select id="selectMemberSearchListCount">
	select
	count(*)
	from
	pds		  	
	<include refid="search" />
</select>
<!-- 등록 -->
<insert id="insertMember">
	insert into member(memberid, username, email, password, authority)
	values(memberid_seq.nextval, #{username}, #{email}, #{password}, #{authority})
</insert>
<!-- 수정 -->
<update id="updateMember">
	update member
	set
	username=#{username}, password=#{password}
</update>
<!-- 탈퇴처리 -->
<update id="banMember">
	update member
	set
	isDelete = 'Y'
	where memberid=#{memberid}
</update>
<!-- 복구처리 -->
<update id="restoreMember">
	update member
	set
	isDelete = 'N'
	where memberid=#{memberid}
</update>
</mapper>